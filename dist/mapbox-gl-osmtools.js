!function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){this._map=e,this._createLayers().bind(this);var t=document.createElement("div");t.className="osm-control";var n=document.createElement("a");n.href="#",n.className="button",n.innerHTML="OSM Notes",n.addEventListener("mousedown",this._requestNotes.bind(this)),t.appendChild(n),e.getContainer().appendChild(t),e.on("click",function(t){var n=e.queryRenderedFeatures(t.point,{layers:["noturn"]});if(n.length){var r="LineString"==n[0].geometry.type?"way":"node",o="way"==r?t.lngLat:n[0].geometry.coordinates,s="<strong>OpenStreetMap Feature</strong><br>"+r+"</b>: <a href='https://www.openstreetmap.org/"+r+"/"+n[0].properties.id+"'>"+n[0].properties.id+"</a>";(new mapboxgl.Popup).setLngLat(o).setHTML(s).addTo(e)}var u=e.getBounds(),a=u.getNorth(),c=u.getSouth(),p=u.getWest(),f=u.getEast(),l="https://127.0.0.1:8112/load_and_zoom?left="+p+"&right="+f+"&top="+a+"&bottom="+c;i.get(l,function(){})})}var o=e("util"),i=e("xhr"),s=new mapboxgl.GeoJSONSource;r.prototype={_apiURL:"http://api.openstreetmap.org/",_createLayers:function(){console.log("Creating Layer"),this._map.on("load",function(){console.log("Adding Layer"),this._map.addSource("osm-notes-source",s),this._map.addLayer({id:"osm-notes",type:"symbol",source:"osm-notes-source",layout:{"icon-image":"rocket-15"}})})},_requestNotes:function(){var e=r.prototype._apiURL+"api/0.6/notes.json?closed=-1&bbox=%s,%s,%s,%s",t=this._map,n=t.getBounds(),u=n.getNorth(),a=n.getSouth(),c=n.getWest(),p=n.getEast();e=o.format(e,c,a,p,u),console.log("Requesting Notes"),i.get(e,function(e,n){console.log(n.body),console.log(t),s.setData(n.body)})}},window.mapboxgl?mapboxgl.OSM=r:"undefined"!=typeof t&&(t.exports=r)},{util:10,xhr:11}],2:[function(e,t,n){function r(e,t,n){if(!u(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===a.call(e)?o(e,t,n):"string"==typeof e?i(e,t,n):s(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;o>r;r++)c.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,o=e.length;o>r;r++)t.call(n,e.charAt(r),r,e)}function s(e,t,n){for(var r in e)c.call(e,r)&&t.call(n,e[r],r,e)}var u=e("is-function");t.exports=r;var a=Object.prototype.toString,c=Object.prototype.hasOwnProperty},{"is-function":5}],3:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],5:[function(e,t,n){function r(e){var t=o.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=r;var o=Object.prototype.toString},{}],6:[function(e,t,n){var r=e("trim"),o=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),s=r(e.slice(n+1));"undefined"==typeof t[o]?t[o]=s:i(t[o])?t[o].push(s):t[o]=[t[o],s]}),t}},{"for-each":2,trim:8}],7:[function(e,t,n){function r(){p&&u&&(p=!1,u.length?c=u.concat(c):f=-1,c.length&&o())}function o(){if(!p){var e=setTimeout(r);p=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,p=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var u,a=t.exports={},c=[],p=!1,f=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||p||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],8:[function(e,t,n){function r(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=r,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],9:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],10:[function(e,t,n){(function(t,r){function o(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),a(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function s(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function a(e,t,r){if(e.customInspect&&t&&R(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return v(o)||(o=a(e,o,r)),o}var i=c(e,t);if(i)return i;var s=Object.keys(t),g=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),E(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(t);if(0===s.length){if(R(t)){var h=t.name?": "+t.name:"";return e.stylize("[Function"+h+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return p(t)}var m="",b=!1,w=["{","}"];if(y(t)&&(b=!0,w=["[","]"]),R(t)){var x=t.name?": "+t.name:"";m=" [Function"+x+"]"}if(O(t)&&(m=" "+RegExp.prototype.toString.call(t)),S(t)&&(m=" "+Date.prototype.toUTCString.call(t)),E(t)&&(m=" "+p(t)),0===s.length&&(!b||0==t.length))return w[0]+m+w[1];if(0>r)return O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var j;return j=b?f(e,t,r,g,s):s.map(function(n){return l(e,t,r,g,n,b)}),e.seen.pop(),d(j,m,w)}function c(e,t){if(x(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o){for(var i=[],s=0,u=t.length;u>s;++s)_(t,String(s))?i.push(l(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(e,t,n,r,o,!0))}),i}function l(e,t,n,r,o,i){var s,u,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),_(r,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(n)?a(e,c.value,null):a(e,c.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),x(s)){if(i&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function d(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function y(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return null==e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function x(e){return void 0===e}function O(e){return j(e)&&"[object RegExp]"===T(e)}function j(e){return"object"==typeof e&&null!==e}function S(e){return j(e)&&"[object Date]"===T(e)}function E(e){return j(e)&&("[object Error]"===T(e)||e instanceof Error)}function R(e){return"function"==typeof e}function L(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function T(e){return Object.prototype.toString.call(e)}function q(e){return 10>e?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[q(e.getHours()),q(e.getMinutes()),q(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];i>n;u=r[++n])s+=h(u)||!j(u)?" "+u:" "+o(u);return s},n.deprecate=function(e,o){function i(){if(!s){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),s=!0}return e.apply(this,arguments)}if(x(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return i};var z,H={};n.debuglog=function(e){if(x(z)&&(z=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!H[e])if(new RegExp("\\b"+e+"\\b","i").test(z)){var r=t.pid;H[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else H[e]=function(){};return H[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=y,n.isBoolean=g,n.isNull=h,n.isNullOrUndefined=m,n.isNumber=b,n.isString=v,n.isSymbol=w,n.isUndefined=x,n.isRegExp=O,n.isObject=j,n.isDate=S,n.isError=E,n.isFunction=R,n.isPrimitive=L,n.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!j(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:7,inherits:4}],11:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return f(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=d(t,{uri:e}),r.callback=n,r}function s(e,t,n){return t=i(e,t,n),u(t)}function u(e){function t(){4===c.readyState&&i()}function n(){var e=void 0;if(c.response?e=c.response:"text"!==c.responseType&&c.responseType||(e=c.responseText||c.responseXML),w)try{e=JSON.parse(e)}catch(t){}return e}function r(e){clearTimeout(y),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,a)}function i(){if(!d){var t;clearTimeout(y),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=a,o=null;0!==t?(r={body:n(),statusCode:t,method:h,headers:{},url:g,rawRequest:c},c.getAllResponseHeaders&&(r.headers=l(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),u(o,r,r.body)}}var u=e.callback;if("undefined"==typeof u)throw new Error("callback argument missing");u=p(u);var a={body:void 0,headers:{},statusCode:0,method:h,url:g,rawRequest:c},c=e.xhr||null;c||(c=e.cors||e.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var f,d,y,g=c.url=e.uri||e.url,h=c.method=e.method||"GET",m=e.body||e.data||null,b=c.headers=e.headers||{},v=!!e.sync,w=!1;if("json"in e&&(w=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(e.json))),c.onreadystatechange=t,c.onload=i,c.onerror=r,c.onprogress=function(){},c.ontimeout=r,c.open(h,g,!v,e.username,e.password),v||(c.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(y=setTimeout(function(){d=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)},e.timeout)),c.setRequestHeader)for(f in b)b.hasOwnProperty(f)&&c.setRequestHeader(f,b[f]);else if(e.headers&&!o(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(m),c}function a(){}var c=e("global/window"),p=e("once"),f=e("is-function"),l=e("parse-headers"),d=e("xtend");t.exports=s,s.XMLHttpRequest=c.XMLHttpRequest||a,s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:c.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){s["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),u(n)}})},{"global/window":3,"is-function":5,once:12,"parse-headers":6,xtend:13}],12:[function(e,t,n){function r(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=r,r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},{}],13:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)o.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var o=Object.prototype.hasOwnProperty},{}]},{},[1]);
